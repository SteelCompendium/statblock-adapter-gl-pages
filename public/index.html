<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="A web-based tool for converting tabletop RPG statblocks between different formats"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
    />
    <title>Statblock Converter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-content {
            padding: 30px;
        }

        .converter-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .input-section, .output-section {
            display: flex;
            flex-direction: column;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .format-selector {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: white;
            font-size: 0.9rem;
        }

        .text-area {
            width: 100%;
            height: 400px;
            padding: 20px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .text-area:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .text-area.readonly {
            background-color: #f8f9fa;
            cursor: default;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        .status-bar {
            background: #f8f9fa;
            padding: 15px 30px;
            border-top: 1px solid #e1e8ed;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: #6c757d;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #28a745;
        }

        @media (max-width: 768px) {
            .converter-section {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 200px;
            }
        }

        .example-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .example-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .example-text {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: #6c757d;
            white-space: pre-line;
        }
    </style>
</head>
<body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>

    <script>
        // DOM Elements
        const inputText = document.getElementById('input-text');
        const outputText = document.getElementById('output-text');
        const inputFormat = document.getElementById('input-format');
        const outputFormat = document.getElementById('output-format');
        const convertBtn = document.getElementById('convert-btn');
        const clearBtn = document.getElementById('clear-btn');
        const copyBtn = document.getElementById('copy-btn');
        const charCount = document.getElementById('char-count');

        // Statblock Converter Class (Stub)
        class StatblockConverter {
            constructor() {
                this.parsers = {
                    'auto': this.autoDetectParser.bind(this),
                    'dnd5e': this.parseDnD5e.bind(this),
                    'pathfinder': this.parsePathfinder.bind(this),
                    'custom': this.parseCustom.bind(this)
                };

                this.formatters = {
                    'json': this.formatAsJSON.bind(this),
                    'xml': this.formatAsXML.bind(this),
                    'yaml': this.formatAsYAML.bind(this),
                    'markdown': this.formatAsMarkdown.bind(this)
                };
            }

            convert(input, inputFormat, outputFormat) {
                try {
                    // Parse input
                    const parsed = this.parsers[inputFormat](input);
                    
                    // Format output
                    const formatted = this.formatters[outputFormat](parsed);
                    
                    return {
                        success: true,
                        data: formatted,
                        message: 'Conversion successful'
                    };
                } catch (error) {
                    return {
                        success: false,
                        data: null,
                        message: `Conversion failed: ${error.message}`
                    };
                }
            }

            // Parser stubs
            autoDetectParser(input) {
                // TODO: Implement auto-detection logic
                return this.parseDnD5e(input);
            }

            parseDnD5e(input) {
                // TODO: Implement D&D 5e parser
                return {
                    name: "Parsed Creature",
                    type: "humanoid",
                    size: "Medium",
                    alignment: "neutral",
                    ac: 10,
                    hp: 10,
                    speed: "30 ft.",
                    stats: { str: 10, dex: 10, con: 10, int: 10, wis: 10, cha: 10 },
                    raw_input: input
                };
            }

            parsePathfinder(input) {
                // TODO: Implement Pathfinder parser
                return this.parseDnD5e(input);
            }

            parseCustom(input) {
                // TODO: Implement custom parser
                return this.parseDnD5e(input);
            }

            // Formatter stubs
            formatAsJSON(data) {
                return JSON.stringify(data, null, 2);
            }

            formatAsXML(data) {
                // TODO: Implement XML formatter
                return `<?xml version="1.0" encoding="UTF-8"?>
<statblock>
    <name>${data.name}</name>
    <type>${data.type}</type>
    <size>${data.size}</size>
    <alignment>${data.alignment}</alignment>
    <ac>${data.ac}</ac>
    <hp>${data.hp}</hp>
    <speed>${data.speed}</speed>
</statblock>`;
            }

            formatAsYAML(data) {
                // TODO: Implement YAML formatter
                return `name: ${data.name}
type: ${data.type}
size: ${data.size}
alignment: ${data.alignment}
ac: ${data.ac}
hp: ${data.hp}
speed: ${data.speed}`;
            }

            formatAsMarkdown(data) {
                // TODO: Implement Markdown formatter
                return `# ${data.name}

**Type:** ${data.size} ${data.type}, ${data.alignment}
**Armor Class:** ${data.ac}
**Hit Points:** ${data.hp}
**Speed:** ${data.speed}

## Ability Scores
- **STR:** ${data.stats.str}
- **DEX:** ${data.stats.dex}
- **CON:** ${data.stats.con}
- **INT:** ${data.stats.int}
- **WIS:** ${data.stats.wis}
- **CHA:** ${data.stats.cha}`;
            }
        }

        // Initialize converter
        const converter = new StatblockConverter();

        // Event Listeners
        convertBtn.addEventListener('click', handleConvert);
        clearBtn.addEventListener('click', handleClear);
        copyBtn.addEventListener('click', handleCopy);
        inputText.addEventListener('input', updateCharCount);

        function handleConvert() {
            const input = inputText.value.trim();
            if (!input) {
                outputText.value = 'Please enter a statblock to convert.';
                return;
            }

            const inputFormatValue = inputFormat.value;
            const outputFormatValue = outputFormat.value;

            const result = converter.convert(input, inputFormatValue, outputFormatValue);

            if (result.success) {
                outputText.value = result.data;
                updateStatus('Conversion successful', 'success');
            } else {
                outputText.value = `Error: ${result.message}`;
                updateStatus('Conversion failed', 'error');
            }
        }

        function handleClear() {
            inputText.value = '';
            outputText.value = '';
            updateCharCount();
            updateStatus('Ready', 'ready');
        }

        async function handleCopy() {
            if (!outputText.value) {
                updateStatus('Nothing to copy', 'warning');
                return;
            }

            try {
                await navigator.clipboard.writeText(outputText.value);
                updateStatus('Copied to clipboard', 'success');
                setTimeout(() => updateStatus('Ready', 'ready'), 2000);
            } catch (err) {
                updateStatus('Failed to copy', 'error');
            }
        }

        function updateCharCount() {
            const count = inputText.value.length;
            charCount.textContent = `${count} character${count !== 1 ? 's' : ''}`;
        }

        function updateStatus(message, type) {
            const statusIndicator = document.querySelector('.status-indicator span');
            const statusDot = document.querySelector('.status-dot');
            
            statusIndicator.textContent = message;
            
            // Update dot color based on status type
            const colors = {
                'ready': '#28a745',
                'success': '#28a745',
                'warning': '#ffc107',
                'error': '#dc3545'
            };
            
            statusDot.style.background = colors[type] || colors.ready;
        }

        // Initialize
        updateCharCount();
    </script>
</body>
</html> 